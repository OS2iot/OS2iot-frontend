<app-top-bar-table
  (updateSelectedOpt)="filterByOrgId($event)"
  [addDropdown]="true"
  [component]="true"
  [dropdownDefaultOption]="'GATEWAY.DROPDOWNDEFAULT' | translate"
  [dropdownLabel]="'GATEWAY.DROPDOWNFILTER' | translate"
  [options]="organizations"
>
</app-top-bar-table>
<div class="jumbotron--table">
  <div class="mat-elevation-z8">
    @if (isLoadingResults) {
      <div class="loading-shade">
        @if (isLoadingResults) {
          <mat-spinner></mat-spinner>
        }
      </div>
    }
    <table [dataSource]="data" mat-table matSort matSortActive="name" matSortDirection="asc" matSortDisableClear>
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "PAYLOAD-DECODER.NAME" | translate }}
        </th>
        <td *matCellDef="let element" mat-cell>
          <a [routerLink]="['payload-decoder-detail', element.id]" class="application-link" routerLinkActive="active">
            {{ element.name }}</a
          >
        </td>
      </ng-container>

      <!-- Id Column -->
      <ng-container matColumnDef="id">
        <th *matHeaderCellDef mat-header-cell mat-sort-header>
          {{ "PAYLOAD-DECODER.ID" | translate }}
        </th>
        <td *matCellDef="let element" mat-cell>
          {{ element.id }}
        </td>
      </ng-container>

      <ng-container matColumnDef="organizationID">
        <th *matHeaderCellDef mat-header-cell>
          {{ "PAYLOAD-DECODER.ORGANIZATION" | translate }}
        </th>
        <td *matCellDef="let element" mat-cell>
          {{ element.organizationName }}
        </td>
      </ng-container>

      <!-- Menu Column -->
      <ng-container matColumnDef="menu">
        <th *matHeaderCellDef mat-header-cell></th>
        <td *matCellDef="let element" mat-cell>
          @if (getCanEdit(element.organizationId)) {
            <div class="dropdown">
              <a
                [attr.aria-label]="'APPLICATION-TABLE-ROW.SHOW-OPTIONS' | translate"
                aria-expanded="false"
                class="applicationRow__edit dropdown-toggle"
                data-toggle="dropdown"
                href="#"
                id="tableRowDropdown-{{ element.id }}"
                role="button"
              ></a>
              <ul attr.aria-labelledby="tableRowDropdown-{{ element.id }}" class="dropdown-menu dropdown-menu--table">
                <li class="dropdown-item">
                  <a [routerLink]="['payload-decoder-edit', element.id]" routerLinkActive="active"
                  >{{ "PAYLOAD-DECODER-TABLE-ROW.EDIT" | translate }}
                  </a>
                </li>
                <li class="dropdown-item">
                  <a (click)="clickDelete(element)" [routerLink]="[]"
                  >{{ "PAYLOAD-DECODER-TABLE-ROW.DELETE" | translate }}
                  </a>
                </li>
              </ul>
            </div>
          }
        </td>
      </ng-container>

      <tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
      <tr *matRowDef="let row; columns: displayedColumns" mat-row></tr>
    </table>
    <mat-paginator
      [length]="resultsLength"
      [pageSizeOptions]="pageSizeOptions"
      [pageSize]="pageSize"
      showFirstLastButtons
    >
    </mat-paginator>
  </div>
</div>
