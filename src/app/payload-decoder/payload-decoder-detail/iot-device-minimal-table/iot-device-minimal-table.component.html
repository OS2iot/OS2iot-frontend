<div class="mat-elevation-z8">
    <div>
        <table mat-table [dataSource]="data" class="example-table" matSortDisableClear>
            <!-- Name Column -->
            <ng-container matColumnDef="name">
                <th *matHeaderCellDef mat-header-cell>
                    {{ "IOT-TABLE.NAME" | translate }}
                </th>
                <td mat-cell *matCellDef="let element">
                    <a
                        *ngIf="element.canRead; else justText"
                        [routerLink]="['/', 'applications', element.applicationId, 'iot-device', element.id]"
                        routerLinkActive="active"
                        class="device-link"
                        >{{ element.name }}</a
                    >
                    <ng-template #justText>
                        {{ element.name }}
                    </ng-template>
                </td>
            </ng-container>

            <!-- Organiation Column -->
            <ng-container matColumnDef="organization">
                <th mat-header-cell *matHeaderCellDef class="col-2">
                    {{ "IOT-TABLE.ORGANISATION" | translate }}
                </th>
                <td mat-cell *matCellDef="let element">
                    {{ getOrganizationName(element.organizationId) }}
                </td>
            </ng-container>
            <!-- Last updated -->
            <ng-container matColumnDef="updatedAt">
                <th mat-header-cell *matHeaderCellDef class="col-3">
                    {{ "IOT-TABLE.ACTIVE" | translate }}
                </th>

                <td mat-cell *matCellDef="let element">{{ lastActive(element) }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
    </div>

    <mat-paginator
        [length]="resultsLength"
        [pageSizeOptions]="pageSizeOptions"
        [pageSize]="pageSize"
        showFirstLastButtons
    >
    </mat-paginator>
</div>
