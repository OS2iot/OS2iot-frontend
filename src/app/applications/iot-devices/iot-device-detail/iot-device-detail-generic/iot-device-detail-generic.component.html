<div class="row">
  <div class="col-md-6 d-flex align-items-stretch">
    <div class="jumbotron jumbotron--m-right jumbotron--full-width width100percent">
      <h3>{{ "IOTDEVICE.DETAIL" | translate }}</h3>
      <p class="me-1">
        <strong>{{ "IOT-TABLE.APPLICATION" | translate }}</strong
        >{{ device.application.name }}
      </p>
      <app-general-details [data]="device"></app-general-details>
      <!-- Battery -->
      @if (device.type === DeviceType.LORAWAN) {
        <mat-divider></mat-divider>
        <div class="d-flex align-items-center">
          <p class="me-1">
            <strong>{{ "IOT-TABLE.BATTERY" | translate }}</strong>
          </p>
          <app-batteri-status [color]="batteryStatusColor" [percentage]="batteryStatusPercentage"></app-batteri-status>
        </div>
      }
      <mat-divider></mat-divider>

      <!-- Unit type -->
      <p>
        <strong>{{ "IOTDEVICE.TYPE" | translate }}</strong
        >{{ "IOT-DEVICE-TYPES." + device.type | translate }}
      </p>
      <!-- IF  Lora device-->
      @if (device.type === DeviceType.LORAWAN && device.lorawanSettings) {
        <app-iot-device-detail-lorawan [device]="device"></app-iot-device-detail-lorawan>
      }
      <!-- SIGFOX DEVICE-->
      @if (device.type === DeviceType.SIGFOX && device.sigfoxSettings) {
        <app-iot-device-detail-sigfox [device]="device"></app-iot-device-detail-sigfox>
      } @if (device.type === DeviceType.GENERIC_HTTP) {
      <mat-divider></mat-divider>
      <p>
        <strong>{{ "IOTDEVICE.GENERIC_HTTP.APIKEY" | translate }}</strong>
        <span class="pre text-break">{{ httpDeviceUrl }}</span>
      </p>
    } @if (device.type === DeviceType.MQTT_INTERNAL_BROKER) {
      <app-iot-device-details-mqtt-internal-broker [device]="device"></app-iot-device-details-mqtt-internal-broker>
    } @if (device.type === DeviceType.MQTT_EXTERNAL_BROKER) {
      @if (device.mqttExternalBrokerSettings.invalidMqttConfig) {
        <p class="alarmText">
          {{ "IOTDEVICE.MQTT.NOCONNECTION" | translate }}
        </p>
      }
      <app-iot-device-details-mqtt-external-broker [device]="device"></app-iot-device-details-mqtt-external-broker>
    }
      <!-- Comment -->
      <mat-divider></mat-divider>
      <p>
        <strong>{{ "IOTDEVICE.COMMENT" | translate }}</strong>
        @if (device.comment) {
          <span>
                {{ device.comment }}
              </span>
        } @else {
        {{ "IOTDEVICE.NOCOMMENT" | translate }}
      }
      </p>
      @if (metadataTags.length) {
        <mat-divider></mat-divider>
        <p>
          <strong>{{ "QUESTION.METADATA" | translate }}</strong>
        </p>
        @for (tag of metadataTags; track tag; let i = $index) {
          <p>
            <strong>{{ i + 1 }}: {{ tag.key }}</strong>
            <span>{{ tag.value }}</span>
          </p>
        }
      }
    </div>
  </div>
  <div class="col-md-6 d-flex align-items-stretch">
    <div class="jumbotron jumbotron--m-left jumbotron--full-width width100percent">
      <h3>{{ "IOTDEVICE.LOCATION" | translate }}</h3>
      @if (device.location) {
        <div>
          <div class="thirty-height">
            <app-map [coordinates]="getCoordinates()"></app-map>
          </div>
          <div class="row">
            <div class="col-6 latLonWrapWidth">
              <p>
                <strong>{{ "IOTDEVICE.LATITUDE" | translate }}</strong
                >{{ latitude | number : "2.1-9" }}
              </p>
            </div>
            <div class="col-6 latLonWrapWidth">
              <p>
                <strong>{{ "IOTDEVICE.LONGITUDE" | translate }}</strong
                >{{ longitude | number : "2.1-9" }}
              </p>
            </div>
          </div>
        </div>
      } @else {
      <p>{{ "IOTDEVICE.NOLOCATION" | translate }}</p>
    }
      <p>
        <strong>
          {{ "IOTDEVICE.COMMENTONLOCATION" | translate }}
        </strong>
        @if (device.commentOnLocation) {
          <span>
                    {{ device.commentOnLocation }}
                  </span>
        } @else {
        {{ "IOTDEVICE.NOCOMMENTONLOCATION" | translate }}
      }
      </p>
    </div>
  </div>
</div>
